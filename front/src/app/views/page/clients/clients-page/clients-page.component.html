<div class="page-content">

  <h1 class="page-title">{{ title }}</h1>

  <div class="mb-2">
    <p-button size="large" label="Добавить клиента" (onClick)="_addNewClient()"
              icon="pi pi-plus" [raised]="true" />
  </div>

  <div class="w-100 table-container">
    <p-table [value]="_clients()"
             [rows]="10"
             [rowsPerPageOptions]="[10, 25, 50]"
             [paginator]="true"
             [sortOrder]="-1"
             sortField="name"
             sortMode="multiple"
             [tableStyle]="{'min-width': '60rem'}">
      <ng-template #header >
        <tr>
          <th pSortableColumn="name">
            Имя
            <p-sortIcon field="name" />
          </th>
          <th pSortableColumn="phoneNumber">
            Телефон
            <p-sortIcon field="phoneNumber" />
          </th>
          <th pSortableColumn="score">
            Балы
            <p-sortIcon field="score" />
          </th>
          <th pSortableColumn="lastVisit">
            Последний визит
            <p-sortIcon field="lastVisit" />
          </th>
          <th pSortableColumn="comment">
            Комментарий
            <p-sortIcon field="comment" />
          </th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template #body let-client>
        <tr>
          <td>{{ client.name }}</td>
          <td>{{ client.phoneNumber }}</td>
          <td>{{ client.score }}</td>
          <td>{{ client.lastVisit ?? '-' }}</td>
          <td>{{ client.description ?? '-' }}</td>
          <td>
            <div class="flex items-center gap-1">
              <p-button icon="pi pi-eye"
                        pTooltip="Подробная информация"
                        [rounded]="true"
                        [text]="true"
                        [routerLink]="['/clients', client.id]"
                        size="small"
                        severity="info" />
              <p-button icon="pi pi-trash"
                        pTooltip="Удалить клиента {{client.name}}"
                        [rounded]="true"
                        size="small"
                        (click)="_deleteClient(client)"
                        [text]="true" severity="danger" />
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <p-confirm-dialog />
</div>

